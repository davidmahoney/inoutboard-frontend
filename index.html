<!DOCTYPE html>
<html lang="en-us">
	<head>
		<meta http-equiv="x-ua-compatible" content="IE=edge" />
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>In/Out Board</title>
		<link href="inoutboard.css" rel="stylesheet" type="text/css" />
	</head>
	<body>
		<div class="header">
			<img src="logo.png"></img>
			<h1>In/Out Board</h1>
		</div>
		<form data-bind="with: mustLogin">
			<p>
			<label for="usernameField">Username: </label>
			<input type="text" id="usernameField" data-bind="value: $root.username">
			<p>
			<label for="passwordField">Password: </label>
			<input type="password" id="passwordField" data-bind="value: $root.password">
			<p>
			<input type="submit" value="Login" data-bind="click: $root.login">
		</form>
		<ul class="sections" data-bind="foreach: sections">
			<li data-bind="text: $data, 
				css: { selected: $data == $root.chosenSectionId() },
				click: $root.goToSection"></li>
		</ul>
		<p data-bind="text: error" class="errorText">
		</p>
		<div class="mystatus" data-bind="with: user">
			<form>
			I am...
			<p data-bind="text: Name"></p>
			<label for="statusField">I am</label>
			<select id="statusField" data-bind="options: $root.statuses,
												value: StatusValue
												event: {blur: save}">
			</select>
			<p>
			<label for="remarksText">Notes: </label>
			<textarea id="remarksText" rows="3" data-bind="value: Remarks"></textarea>
			<p>
			<button data-bind="click: $root.save">Save</button>
		</form>
		</div>
		<div class="people" data-bind="visible: (chosenSectionId() == 'Everyone')">
			<form>
				<table class="people">
					<thead><tr><th></th><th>Name</th><th>Status</th><th class="desktop-only">Modified By</th><th class="desktop-only">Modified</th><th>Notes</th></tr></thead>
				<!-- ko foreach: $root.people -->
				<tbody class="group_header">
					<tr><td></td><td data-bind="text: label"></td><td></td><td></td><td></td><td></td></tr>
				</tbody>
				<tbody data-bind="foreach: people">
					<tr data-bind="click: $root.viewPerson">
						<!-- ko if: IsEditing -->
						<td style="cursor: pointer;" data-bind="click: save">&#x2714;</td>
						<td data-bind="text: Name"></td> 
						<td><select data-bind="options: $root.statuses, value: StatusValue"></select></td>
						<td colspan="3"><textarea id="remarksField" rows="3" data-bind="value: Remarks" ></textarea></td>
						<td class="desktop-only"></td>
						<td class="desktop-only"></td>
						<!-- /ko -->
						<!-- ko ifnot: IsEditing -->
						<td style="cursor: pointer;" data-bind="click: $root.editPerson, clickBubble: false">&#x270e;</td>
						<td data-bind="text: Name"></td> 
						<td data-bind="text: StatusValue"></td>
						<td class="desktop-only" data-bind="text: LastEditor"></td>
						<td class="desktop-only" data-bind="text: LastEditTime().toLocaleDateString('en-ca', {hour: '2-digit', minute: '2-digit'})"></td>
						<td data-bind="attr: {title: Remarks}, text: (Remarks().length > 50? Remarks().substring(0, 50) + '...':
		  Remarks)"
							></td>
						<!-- /ko -->
					</tr>
				</tbody>
				<!-- /ko -->
			</table>
			</form>
		</div>
		<div class="person" data-bind="visible: chosenSectionId() === $root.sections()[2], with: selectedUser">
			<h2 data-bind="text: Name"></h2>
			<dl>
				<dd>Department</dd>
				<dt data-bind="text: Group"></dt>
				<dd>Telehone</dd>
				<dt data-bind="text: Telephone"></dt>
				<dd>Mobile</dd>
				<dt data-bind="text: Mobile"></dt>
				<dd>Work Site</dd>
				<dt data-bind="text: Office"></dt>
				<dd>Last Edit Time</dd>
				<dt data-bind="text: LastEditTime.formatted"></dt>
			</dl
		</div>
		<script data-main="inoutboard.built" type="text/javascript" src="require.js"></script><!--
		<script type="text/javascript" src="require-config.js"></script>
		<script>
			require(["inoutboard"]);
		</script> -->
	</body>
</html>

